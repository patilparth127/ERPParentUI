<div class="page-wrapper">
  <div class="content">
    <div class="page-header">
      <div class="page-header menu">
        <div class="page-title">
          <h4>Call History</h4>
          <h6>Manage your products</h6>
        </div>
      </div>
    </div>
    <!-- /product list -->
    <div class="card table-list-card">
      <div class="card-body">
        <div class="table-responsive product-list">
          <table class="table  datanew list" matSort (matSortChange)="sortData($event)">
            <thead>
              <tr>
                <th class="no-sort">
                  <label class="checkboxs" (click)="selectAll(initChecked)"> 
                    <input type="checkbox" id="select-all" [(ngModel)]="initChecked">
                    <span class="checkmarks"></span>
                  </label>
                </th>
                <th mat-sort-header="username">Username</th>
                <th mat-sort-header="phoneNumber">Phone Number</th>
                <th mat-sort-header="callType">Call Type</th>
                <th mat-sort-header="duration">Duration</th>
                <th mat-sort-header="dateTime">Date & Time</th>
                <th class="no-sort">Action</th>
              </tr>
            </thead>
            <tbody>
              @for (data of tableData; track data) {
              <tr>
                <td>
                  <label class="checkboxs">
                    <input type="checkbox" [(ngModel)]="data.isSelected">
                    <span class="checkmarks"></span>
                  </label>
                </td>
                <td>
                  <div class="userimgname">
                    <a href="javascript:void(0);" class="product-img">
                      <img [src]="data.img" alt="product">
                    </a>
                    <a href="javascript:void(0);">{{data.username}}</a>
                  </div>
                </td>
                <td>{{data.phoneNumber}}</td>
                @if (data.audio === true) {
                <td class="phone-call-icon"><i class="feather icon-phone income-calls me-1"></i><i class="feather me-1"
                    [ngClass]="{'icon-arrow-down-left income-success': data.callType === 'Incoming Call' || data.callType === 'Outgoing Call', 'icon-arrow-down-right income-success-missed': data.callType === 'Missed Call'}"></i>{{data.callType}}
                </td>
                }
                @if (data.video === true) {
                <td class="phone-call-icon"><i class="feather icon-video income-calls me-1"></i><i class="feather me-1"
                    [ngClass]="{'icon-arrow-down-left income-success': data.callType === 'Incoming Call' || data.callType === 'Outgoing Call', 'icon-arrow-down-right income-success-missed': data.callType === 'Missed Call'}"></i>{{data.callType}}
                </td>
                }
                <td>{{data.duration}}</td>
                <td>{{data.dateTime}}</td>
                <td class="action-table-data">
                  <div class="edit-delete-action">
                    <a class="me-3 p-2" href="javascript:void(0);" data-bs-toggle="modal"
                      data-bs-target="#user-profile-new">
                      <i class="feather icon-eye feather-eye"></i>
                    </a>
                    <a class="confirm-text p-2" href="javascript:void(0);" (click)=confirmColor()>
                      <i class="feather icon-trash-2 feather-trash-2"></i>
                    </a>
                  </div>
                </td>
              </tr>
              }
            </tbody>
          </table>
        </div>
        <app-custom-pagination></app-custom-pagination>
      </div>
    </div>
    <!-- /product list -->
  </div>
</div>
<!-- details popup -->
<div class="modal fade" id="user-profile-new">
  <div class="modal-dialog history-modal-profile">
    <div class="modal-content">
      <div class="page-wrapper details-blk">
        <div class="content">
          <div class="text-center right-sidebar-profile mb-3">
            <figure class="avatar">
              <img src="assets/img/users/user-23.jpg" alt="image">
            </figure>
            <div class="chat-options chat-option-profile">
              <ul class="list-inline">
                <li class="list-inline-item">
                  <a [routerLink]="routes.audioCall" data-bs-dismiss class="btn btn-outline-light "
                    data-bs-toggle="tooltip" data-bs-placement="bottom" title="" data-bs-original-title="Voice Call"
                    matTooltip="Voice Call">
                    <i class="bx bx-phone"></i>
                  </a>
                </li>
                <li class="list-inline-item">
                  <a [routerLink]="routes.chat" class="btn btn-outline-light" data-bs-toggle="tooltip"
                    data-bs-placement="bottom" title="" data-bs-original-title="Chat" matTooltip="Chat">
                    <i class="bx bx-message-square-dots"></i>
                  </a>
                </li>
                <li class="list-inline-item ">
                  <a [routerLink]="routes.videoCall" class="btn btn-outline-light profile-open" data-bs-toggle="tooltip"
                    data-bs-placement="bottom" matTooltip="Video Call" data-bs-original-title="Video Call">
                    <i class="bx bx-video"></i>
                  </a>
                </li>
              </ul>
            </div>
          </div>
          <div class="modal-profile-detail">
            <div class="row">
              <div class="col-lg-6">
                <div class="modal-userlist">
                  <ul>
                    <li>Name<span>Thomas</span></li>
                    <li>Phone<span>+1 25182 94528</span></li>
                    <li>Email<span>thomas&#64;example.com</span></li>
                  </ul>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="modal-userlist d-flex justify-content-center">
                  <ul>
                    <li>Total Calls<span>20</span></li>
                    <li>Average Call Timing<span>0.30</span></li>
                    <li>Average Waiting Time<span>00.5</span></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /details popup -->